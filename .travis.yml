dist: bionic
language: python

install:
  - pip install --quiet flake8 coverage mock
  - sudo apt-get update
  - sudo apt-get install -y gnuplot

script:
  - make test
  - make pages
  - make pages/stats.pdf

deploy:
    provider: pages
    repo: dimsumlabs/dsl-accounts-pages
    local-dir: pages
    target-branch: master
    skip-cleanup: true
    github-token: $GITHUB_TOKEN
    on:
        branch: master
        condition: $GITHUB_TOKEN
